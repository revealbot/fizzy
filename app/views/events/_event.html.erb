<% bubble = event.summary.bubble %>
<% link = event.action == "commented" ? bucket_bubble_path(bubble.bucket, bubble, anchor: dom_id(event.comment)) : bucket_bubble_path(bubble.bucket, bubble) %>

<%= link_to link,
      class: "event panel shadow center center-block flex-inline align-start justify-start gap position-relative",
      style: "--bubble-color: #{ bubble.color }; #{ bubble_rotation(bubble) }",
      data: { controller: "animation", 
              related_element_target: "related", 
              related_element_group_value: bubble.id,
              animation_play_class: "bubble--wobble", 
              animation_play_on_load_value: "true", 
              action: "mouseover->animation#play mouseover->related-element#highlight mouseout->related-element#unhighlight" } do %>
  <div class="bubble__shape flex-item-no-shrink txt-large"></div>

  <div class="flex flex-column min-width txt-small txt-tight-lines align-start txt-align-start">
    <strong style="font-size: 1.1em;" class="txt-break overflow-line-clamp">
      <%= event.action == "commented" ? "RE: #{ bubble.title }" : bubble.title %>
    </strong>
    <span class="flex align-center gap-half align-start">
      <% if event_column(event) == 1 %>
      <span class="flex-item-no-shrink"><%= image_tag "#{event_action_icon(event)}.svg", aria: { hidden: true }, size: 13, class: "colorize--black" %></span>
      <% end %>
      <span class="txt-break overflow-line-clamp" style="--lines: 3;"><%= event_action_sentence(event) %></span>
    </span>
    <span class="translucent"><%= bubble.bucket.name %></span>
  </div>
<% end %>
